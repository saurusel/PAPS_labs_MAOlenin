@startuml C4_Context
!includeurl https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Context.puml

LAYOUT_LEFT_RIGHT()

Person(buyer, "Buyer", "Сотрудник компании, который тратит внутренние поинты на мерч")
Person(content_admin, "Content Admin", "Управляет каталогом товаров и медиа")
Person(fulfillment_admin, "Fulfillment Admin", "Обрабатывает и выдаёт заказы")
Person(combo_admin, "Combo Admin", "Совмещает права контент-админа и админа выдачи")
Person(super_admin, "Super Admin", "Управляет пользователями, ролями и системными настройками")
Person_Ext(bi_analyst, "BI Analyst", "Строит отчёты и дашборды по продажам мерча")

System(merch_system, "Corporate Merch Store", "Внутренний магазин мерча: покупка за поинты, администрирование каталога/остатков/заказов, аудит и экспорты")

System_Ext(google_sheets, "Google Sheets", "Оперативный dump данных для аналитики")
System_Ext(bigquery, "Google BigQuery", "Корпоративное хранилище аналитических данных")
System_Ext(looker, "Looker Studio", "BI-панели и отчёты по мерчу")

System_Ext(sentry, "Sentry", "Мониторинг ошибок фронта и бэка")
System_Ext(ci_cd, "CI/CD Pipeline", "Автоматический деплой приложений из репозитория")
System_Ext(backup_storage, "Backup Storage", "Хранилище резервных копий БД")

Rel(buyer, merch_system, "Каталог, корзина, заказы, отзывы")
Rel(content_admin, merch_system, "Каталог, остатки, медиа, импорты")
Rel(fulfillment_admin, merch_system, "Очередь заказов и статусы выдачи")
Rel(combo_admin, merch_system, "Комбо-админ: каталог и выдача")
Rel(super_admin, merch_system, "Пользователи, роли, импорты/экспорт, аудит, настройки")

Rel(merch_system, google_sheets, "Экспорт данных в листы для аналитики")
Rel(google_sheets, bigquery, "Использует dump как источник данных", "ETL / Connected Sheets")
Rel(bigquery, looker, "Источник данных для дашбордов", "SQL")
Rel(bi_analyst, looker, "Просматривает дашборды и строит отчёты", "Browser")

Rel(merch_system, sentry, "Отправляет ошибки и трассировки", "HTTPS")
Rel(ci_cd, merch_system, "Деплой приложений", "Git / CI/CD")
Rel(merch_system, backup_storage, "Резервное копирование БД", "Backup job")

SHOW_LEGEND()
@enduml
